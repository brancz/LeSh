<!DOCTYPE html>
<html>
  <head>
    <title>LeSh</title>
    <link rel="stylesheet" type="text/css" href="//cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.2.0/css/bootstrap.min.css" />
    <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/2.1.1/jquery.min.js" type="text/javascript"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.2.0/js/bootstrap.min.js" type="text/javascript"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/zeroclipboard/2.1.6/ZeroClipboard.min.js" type="text/javascript"></script>
    <script>
        $(function() {
            $('#button_shorten').click(function() {
                var link = $('#link_uri').val();
                $.ajax({
                    type: 'POST',
                    url: '/api/links',
                    contentType: 'application/json; charset=utf-8',
                    dataType: 'json',
                    data: JSON.stringify({uri: link}),
                    success: function(data, status, xhr) {
                        $('#shortened_link').val(data.internal_uri);
                    },
                    error: function(xhr, status, error) {
                        console.log(xhr.responseJSON);
                    }
                });
            });
            var client = new ZeroClipboard( document.getElementById("copy_button") );
            client.on( "ready", function( readyEvent ) {
                client.on( "copy", function( event ) {
                    var clipboard = event.clipboardData;
                    clipboard.setData( "text/plain", $('#shortened_link').val() );
                } );
            } );
        });
    </script>
  </head>
  <body>
    <div class="container" style="padding-top: 40px;">
      <div class="row">
        <div class="col-lg-6 col-lg-offset-3 well">
          <h1 class="text-center">LeSh</h1>
          <h2 class="text-center">Le Link Shortener</h2>
          <div class="input-group" style="margin: 30px 10px 0px 10px;">
            <input class="form-control" id="link_uri" placeholder="e.g. http://google.com" type="text" />
            <span class="input-group-btn">
              <input class="btn btn-default" id="button_shorten" type="submit" value="Shorten" style="width: 80px;" />
            </span>
          </div>
          <div class="input-group" style="margin: 10px 10px 0px 10px;">
            <input class="form-control" id="shortened_link" type="text" />
            <span class="input-group-btn">
              <button id="copy_button" class="btn btn-default" type="button" style="width: 80px;">
                <span>Copy</span>
              </button>
            </span>
          </div>
        </div>
      </div>
    </div>
  </body>
</html>
